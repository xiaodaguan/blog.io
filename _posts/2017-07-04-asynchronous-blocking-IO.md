---
layout: post
title: 对于IO：阻塞、非阻塞，同步、异步的一点点理解
date: 2017-07-04
categories: blog
tags: [IO,同步/异步,阻塞/非阻塞]
description: 总结，加上一点自己的思考
---

首先：
- 同步/异步，阻塞/非阻塞，是对同一个事情的两种说法吗？
- 当然不是

## 区别在哪里

主要是关注点的不同：
- 同步/异步：主要关注点在与消息通信机制。发出调用，没得到结果之前，是否返回
- 阻塞/非阻塞：主要关注程序等待结果时的状态。发出调用，结果返回前，线程是否挂起

## 如何理解

以打电话订酒店为例，假设打了电话，酒店说要查一下才能知道是否可以预定。
#### 同步/异步
- 同步：打了电话，说明事情，不挂电话(返回)
- 异步：打了电话，说明事情，对方说我们先挂电话吧，有结果给我回电(callback)
#### 阻塞/非阻塞
- 阻塞：在得到结果之前(是否能订上酒店)，甭管别的，一直等这个结果
- 非阻塞：先忙别的去，等有消息了再说

#### 具体组合

- 同步阻塞：打了电话-不挂电话-一直等结果
- 同步非阻塞：打了电话-不挂电话忙别的事情-隔一会拿起电话问一下[有结果了吗?]...(也可以是挂了电话，隔一会打电话询问一次)
- 异步阻塞：打了电话-挂掉电话-不干别的坐在电话旁等回电
- 异步非阻塞：打了电话-挂掉电话-忙别的事情-等待对方回电之后再处理订酒店的事

这个例子中肯定是异步+非阻塞最科学了，效率高，真实应用中，可能4中组合方式各有各的应用场景。

感觉例子中，对于同步：挂电话=返回的比喻不太贴切，不过暂时也没有更好的比喻，重点关注callback的行为就好。

## 总结

阻塞非阻塞与是否同步无关，可以依靠协程来实现同步非阻塞

同步与非同步描述的是行为方式，阻塞和非阻塞描述的是状态
